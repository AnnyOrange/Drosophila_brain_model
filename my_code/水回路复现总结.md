# 水回路复现总结（my_code 运行结果）

- 环境：`conda run -n flybrain`，单核；`--n-run 2`，频率 100 Hz，输出目录 `results/my_code_water/`。
- 生成文件：`results/my_code_water/waterR_100Hz.parquet`。
- 运行状态：Brian2 因权限限制回退到 numpy 后端（仅影响速度，不影响结果）；无报错。

## 结果概览（100 Hz，n_run=2）
- MN9（口器运动神经元）在本次运行中未检测到放电（不在 rate 表中）。
- Top5 高响应神经元（Hz）：
  1. `720575940625861168` — 110.5  
  2. `720575940613786774` — 108.0  
  3. `720575940631898285` — 106.0  
  4. `720575940630553415` — 102.0  
  5. `720575940622902535` — 100.5  

## 复现步骤（已验证）
```bash
# 1) 运行水回路（100 Hz，试次缩短）
conda run -n flybrain python my_code/water_circuit.py --path-res results/my_code_water --n-proc 1 --n-run 2 freq --freqs 100

# 2) 汇总速率（输出 MN9 与 Top5）
conda run -n flybrain --no-capture-output python - <<'PY'
import utils as utl
from model import default_params

path = 'results/my_code_water/waterR_100Hz.parquet'
rate, _ = utl.get_rate(utl.load_exps([path]), t_run=default_params['t_run'], n_run=2)
mn9 = 720575940660219265
if mn9 in rate.index:
    print('MN9 rate', float(rate.loc[mn9, 'waterR_100Hz']))
else:
    print('MN9 not found in rate index')
print('Top5')
print(rate.sort_values('waterR_100Hz', ascending=False).head())
PY
```

## 说明
- 本次仅验证 100 Hz 单频率；未覆盖论文 Figure 4A 的全频率扫描（20–260 Hz）。
- 若需更稳定结果，建议增大 `--n-run`，或执行全频率扫描再汇总。
